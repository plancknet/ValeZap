:root {
    --whatsapp-green: #25d366;
    --whatsapp-green-dark: #075e54;
    --whatsapp-gray-light: #f0f2f5;
    --whatsapp-gray: #ededed;
    --whatsapp-text: #1f2c34;
    --chat-sent: #d9fdd3;
    --chat-received: #ffffff;
    --radius-lg: 24px;
    --shadow-md: 0 16px 40px rgba(17, 24, 39, 0.12);
    --font-family: 'Inter', 'Segoe UI', sans-serif;
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    font-family: var(--font-family);
    background: linear-gradient(180deg, #0b141a 0%, #09141a 35%, #d8dbde 100%);
    color: var(--whatsapp-text);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: clamp(12px, 4vh, 24px);
}

@supports (height: 100svh) {
    .app-shell {
        height: min(760px, 100svh);
    }
}
.app-shell {
    width: 100%;
    max-width: 960px;
    height: min(760px, 100vh);
    height: clamp(560px, 90vh, 760px);
    background: var(--whatsapp-gray-light);
    border-radius: 20px;
    box-shadow: var(--shadow-md);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.chat-surface {
    flex: 1;
    min-height: 0;
    background: var(--whatsapp-gray-light);
    display: flex;
    flex-direction: column;
}

.chat-header {
    background: var(--whatsapp-green-dark);
    color: #ffffff;
    padding: 14px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 2;
}

.header-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.avatar {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.12);
    display: flex;
    align-items: center;
    justify-content: center;
}

.avatar svg {
    width: 22px;
    height: 22px;
    fill: none;
    stroke: #ffffff;
    stroke-width: 1.5;
}

.header-title {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.header-title h1 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
}

.header-title span {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.72);
}

.header-action {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: none;
    background: transparent;
    color: rgba(255, 255, 255, 0.85);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background 0.2s ease;
}

.header-action:hover {
    background: rgba(255, 255, 255, 0.16);
}

.messages-panel {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    padding: 24px 18px 16px;
    background-image: url("data:image/svg+xml,%3Csvg width='260' height='260' viewBox='0 0 260 260' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill-opacity='0.03' fill='%23000000'%3E%3Cpath d='M129.3 109.5c4.5-8.3 8.3-17.2 11.4-26.5 2.6-7.8 4.8-15.9 6.6-24.1 1.8-8.1 3.3-16.4 4.4-24.8.6-4.2 1.1-8.4 1.5-12.6.2-2.1.4-4.2.5-6.3.1-1.1.1-2.1.2-3.2 0-.5 0-1.1.1-1.6 0-.3 0-.5 0-.8v-.4-.2l.1-.2v-.1-.1c0-.1 0-.1 0 0v.2c0 .1 0 .2-.1.4-.1.3-.2.7-.4 1.1-.3.8-.8 1.7-1.4 2.6-1.2 1.8-2.8 3.5-4.6 5-3.6 3-8.1 5.4-13 7.1-9.8 3.4-20.5 4.8-31.1 4.3-5.3-.3-10.6-.9-15.8-1.9-2.6-.5-5.2-1.1-7.7-1.8-1.3-.4-2.5-.8-3.8-1.2l-1.9-.6c-.3-.1-.6-.2-.9-.3-.1 0-.3-.1-.4-.1-.1 0-.1 0-.2-.1h-.1c-.1 0-.1 0 0 0 .1 0 .3 0 .4.1.3.1.6.2 1 .3.7.2 1.5.5 2.3.8 1.6.6 3.3 1.3 5.1 2.1 3.6 1.6 7.4 3.5 11.3 5.6 7.8 4.2 15.9 9.1 23.5 14.8 3.8 2.9 7.5 5.9 11 9.1 1.8 1.6 3.5 3.2 5.2 4.9.8.8 1.6 1.7 2.4 2.5.4.4.8.8 1.1 1.3.2.2.4.5.5.7.1.1.1.2.2.3 0 .1 0 .1.1.1 0 0 0 .1 0 0 0-.1 0-.1-.1-.2-.1-.3-.2-.6-.4-1-.4-.8-.9-1.6-1.5-2.4-1.2-1.6-2.6-3.1-4.1-4.6-3-2.9-6.3-5.6-9.8-8.1-7-5-14.6-9.4-22.5-13.1-4-1.9-8-3.6-12.1-5.1-2.1-.8-4.1-1.5-6.2-2.1-.5-.2-1.1-.3-1.6-.5-.3-.1-.5-.2-.8-.2-.1 0-.3-.1-.4-.1-.1 0-.1 0-.2 0h-.1c0 0 .1 0 .1 0 .1 0 .2 0 .3.1.2 0 .4.1.6.1.4.1.8.2 1.2.4 1.6.6 3.2 1.3 4.8 2.1 3.2 1.6 6.3 3.4 9.3 5.4 6 4 11.7 8.4 16.9 13.3 2.6 2.4 5.1 5 7.4 7.6 1.2 1.3 2.3 2.7 3.4 4.1.5.7 1 1.4 1.5 2.1.2.4.5.7.7 1.1.1.2.2.4.3.6.1.1.1.2.1.3 0 .1 0 .1 0 .1v-.1c0-.1-.1-.3-.2-.4-.2-.3-.4-.6-.7-1-.6-.8-1.3-1.5-2.1-2.3-1.6-1.5-3.4-2.9-5.3-4.2-3.8-2.6-7.9-4.9-12.2-6.9-8.6-4-17.8-7.2-27.2-9.6-4.7-1.2-9.5-2.2-14.3-3-2.4-.4-4.8-.7-7.3-.9-1.2-.1-2.4-.2-3.6-.3-.6 0-1.2-.1-1.8-.1-.3 0-.6 0-.9 0-.1 0-.3 0-.4 0h-.2c0 0-.1 0 0 0h.1c.1 0 .2 0 .3 0 .2 0 .4 0 .6 0 .4 0 .8.1 1.2.1 1.6.1 3.2.3 4.8.5 3.2.4 6.4.9 9.5 1.6 6.2 1.4 12.3 3.1 18.2 5.2 11.8 4.2 23.1 9.8 33.6 16.8 5.3 3.5 10.4 7.4 15.2 11.6 2.4 2.1 4.7 4.3 6.9 6.6 1.1 1.1 2.2 2.3 3.2 3.5.5.6 1 1.2 1.4 1.8.2.3.4.6.6.9.1.2.2.3.2.5.1.1.1.2.1.2 0 .1 0 .1 0 0 0-.1 0-.2-.1-.3-.1-.2-.2-.5-.4-.7-.3-.5-.7-1-1.1-1.5-1-1-2-2-3.1-2.9-2.2-1.8-4.6-3.5-7.1-5.1-5-3.2-10.3-6.1-15.8-8.7-11-5.2-22.6-9.5-34.5-12.8-5.9-1.7-12-3.1-18.1-4.2-3.1-.6-6.2-1.1-9.3-1.4-1.6-.2-3.1-.3-4.7-.4-.8-.1-1.6-.1-2.4-.1-.4 0-.8 0-1.2 0-.2 0-.4 0-.6 0-.1 0-.2 0-.3 0h-.1c0 0 0 0 .1 0 .1 0 .2 0 .3 0 .2 0 .4 0 .6.1.4 0 .8.1 1.2.1 1.6.1 3.2.3 4.8.5 3.2.4 6.4.9 9.5 1.5 6.2 1.2 12.3 2.7 18.3 4.5 12 3.6 23.6 8.1 34.7 13.6 5.6 2.8 11 5.8 16.2 9.1 2.6 1.7 5.1 3.4 7.5 5.2 1.2 1 2.4 1.9 3.5 2.9.6.5 1.1 1 1.6 1.5.3.3.5.5.7.8.1.1.2.3.3.4.1.1.1.1.1.2 0 0 0 .1 0 0v-.1c0-.1-.1-.2-.1-.3-.1-.2-.3-.4-.4-.6-.3-.4-.7-.8-1.1-1.2-1-1-2-1.9-3.1-2.8-2.2-1.8-4.6-3.5-7.1-5.1-5-3.2-10.3-6.1-15.8-8.7-11-5.2-22.6-9.5-34.5-12.8z'/%3E%3C/g%3E%3C/svg%3E");
    background-size: 320px;
}

.messages-panel::-webkit-scrollbar {
    width: 6px;
}

.messages-panel::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 3px;
}

.message-group {
    display: flex;
    width: 100%;
    margin-bottom: 8px;
    animation: fade-in 0.25s ease;
}

.message-card {
    max-width: 72%;
    background: var(--chat-received);
    border-radius: 16px;
    padding: 12px 14px 10px;
    position: relative;
    box-shadow: 0 2px 6px rgba(66, 90, 112, 0.12);
}

.message-group.user {
    justify-content: flex-end;
}

.message-group.user .message-card {
    background: var(--chat-sent);
    border-bottom-right-radius: 4px;
}

.message-group.bot {
    justify-content: flex-start;
}

.message-group.bot .message-card {
    border-bottom-left-radius: 4px;
}

.message-text {
    margin: 0;
    font-size: 14px;
    line-height: 1.45;
    white-space: pre-wrap;
    word-break: break-word;
}

.message-metadata {
    display: block;
    margin-top: 6px;
    font-size: 11px;
    text-align: right;
    color: rgba(31, 44, 52, 0.55);
}

.placeholder-state {
    text-align: center;
    padding: 80px 24px;
    color: rgba(31, 44, 52, 0.65);
}

.placeholder-icon {
    width: 68px;
    height: 68px;
    margin: 0 auto 16px;
    border-radius: 50%;
    background: rgba(37, 211, 102, 0.15);
    display: flex;
    align-items: center;
    justify-content: center;
}

.chat-input {
    padding: 16px 18px;
    background: #f7f8fa;
    border-top: 1px solid rgba(15, 23, 42, 0.08);
}

.chat-form {
    display: flex;
    gap: 12px;
    align-items: flex-end;
}

.chat-form textarea {
    flex: 1;
    resize: none;
    min-height: 44px;
    max-height: 120px;
    border-radius: 22px;
    border: 1px solid rgba(31, 44, 52, 0.15);
    padding: 12px 16px;
    font-size: 14px;
    line-height: 1.4;
    outline: none;
    transition: border 0.2s ease, box-shadow 0.2s ease;
    background: #ffffff;
}

.chat-form textarea:focus {
    border-color: rgba(37, 211, 102, 0.7);
    box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.15);
}

.send-button {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: none;
    background: var(--whatsapp-green);
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.2s ease;
}

.send-button svg {
    width: 20px;
    height: 20px;
    fill: none;
    stroke: currentColor;
    stroke-width: 1.8;
}

.send-button:disabled {
    cursor: not-allowed;
    opacity: 0.55;
}

.send-button:not(:disabled):hover {
    background: #21c35d;
    transform: translateY(-1px);
}

.form-footnote {
    text-align: center;
    margin-top: 10px;
    font-size: 12px;
    color: rgba(31, 44, 52, 0.55);
}

.debug-bar {
    background: rgba(15, 23, 42, 0.05);
    padding: 8px 16px;
    font-size: 12px;
    color: rgba(31, 44, 52, 0.6);
}

@keyframes fade-in {
    from {
        opacity: 0;
        transform: translateY(12px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (max-width: 768px) {
    body {
        padding: 8px;
    }

    .app-shell {
        max-height: none;
        height: min(100svh, 760px);
        border-radius: 12px;
    }

    .messages-panel {
        padding: 16px 12px;
    }
}
